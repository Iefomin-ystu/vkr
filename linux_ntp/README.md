linux_ntp
=========

## Autodoc

<p style="text-align: center;">Блок документации сформирован автоматически</p>

---

### Описание

linux_ntp - Роль для розлива конфига chronyd и проверки статусов источников времени

### Автор

I.E. Fomin

### Требования

- Минимальная версия ansible: 2.15
- Коллекции:
- Роли:

### Поддерживаемые платформы

Поддерживаемые операционные системы с версиями

- EL:
  - 7
  - 8
  - 9

### Переменные окружения

| Название         | Обязательный             | Описание         | Пример       |
| ------------------------ | ------------------------------------ | ------------------------ | ------------------ |

### Default'ные переменные

| Название                    | Тип    | Значение                    | Описание                                                                                                                                    |
| ----------------------------------- | --------- | ----------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| linux_ntp_time_sources_list | list   | [10.195.128.26 10.76.4.250] | Стандартный список NTP-серверов                                                                                                             |
| linux_ntp_check_sources     | bool   | false                       | Флаг, нужно ли проверять статус источников после обновления на новый конфиг                                                                 |

### Обязательные и необязательные параметры

| Название                    | Тип    | Обязательный             | Значение         | Описание                                                                                                                                    |
| ----------------------------------- | --------- | ------------------------------------ | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| linux_ntp_time_sources_list | list   | false                    |                  | Список источников времени, перый по порядку получит опцию trust                                                                             |
| linux_ntp_check_sources     | bool   | false                    |                  | Флаг, нужно ли проверять статус источников после обновления на новый конфиг                                                                 |

### Предопределённые переменные

| Название             | Тип    | Значение         | Описание                                                                                                   |
| ---------------------------- | --------- | ------------------------ | ------------------------------------------------------------------------------------------------------------------ |
| linux_ntp__conf_path | string | /etc/chrony.conf | Стандартный путь к файлу конфигурации chronyd                                                              |
| linux_ntp__timeout   | int    | 15               | Время ожидания синхронизации хоста с источниками времени                                                   |


### Возвращаемые параметры
| Название         | Описание         | Значение         |
| ------------------------ | ------------------------ | ------------------------ |


### Примеры использования

```yaml
hosts: all
name: Configure chronyd with defined sources
roles:
- role: tensor.linux.linux_ntp
  vars:
    linux_ntp_check_sources: true
    linux_ntp_time_sources_list:
    - 10.195.128.26
    - 10.76.4.250
```

```yaml
hosts: all
name: Configure chronyd with default sources
roles:
- role: tensor.linux.linux_ntp
```


---
<p style="text-align: center;">Блок документации сформирован автоматически</p>
